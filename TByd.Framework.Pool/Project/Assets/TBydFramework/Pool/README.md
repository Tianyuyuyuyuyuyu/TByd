# TBydFramework Pool

TBydFramework Pool æ˜¯ä¸€ä¸ªä¸“ä¸šçº§çš„å¯¹è±¡æ± ç®¡ç†ç³»ç»Ÿï¼Œä¸“ä¸º Unity é¡¹ç›®è®¾è®¡ä¼˜åŒ–ã€‚å®ƒæä¾›äº†å…¨é¢çš„å†…å­˜ç®¡ç†å’Œå¯¹è±¡å¤ç”¨è§£å†³æ–¹æ¡ˆï¼Œå¯æ˜¾è‘—æå‡é¡¹ç›®æ€§èƒ½ï¼Œå‡å°‘å†…å­˜ç¢ç‰‡å’Œ GC å‹åŠ›ã€‚

## æ ¸å¿ƒç‰¹æ€§

### ğŸš€ å…¨é¢çš„å¯¹è±¡æ± æ”¯æŒ

- **GameObject å¯¹è±¡æ± **
  - é«˜æ•ˆç®¡ç†å’Œå¤ç”¨ GameObject å®ä¾‹
  - æ”¯æŒé¢„åˆ¶ä½“å®ä¾‹åŒ–ä¼˜åŒ–
  - è‡ªåŠ¨å¤„ç†æ¿€æ´»/ç¦ç”¨çŠ¶æ€
  
- **ç»„ä»¶å¯¹è±¡æ± **
  - æ™ºèƒ½ç»„ä»¶å¼•ç”¨ç®¡ç†
  - æ”¯æŒå¤šç»„ä»¶ååŒå·¥ä½œ
  - è‡ªåŠ¨ç»„ä»¶çŠ¶æ€ç»´æŠ¤
  
- **èµ„æºå¯¹è±¡æ± **
  - Unity èµ„æºï¼ˆAssetï¼‰æ™ºèƒ½ç¼“å­˜
  - è‡ªåŠ¨èµ„æºåŠ è½½å’Œå¸è½½
  - å†…å­˜å ç”¨ä¼˜åŒ–
  
- **å…±äº«å¯¹è±¡æ± **
  - å…¨å±€å…±äº«å®ä¾‹ç®¡ç†
  - è·¨åœºæ™¯å¯¹è±¡å¤ç”¨
  - æ™ºèƒ½å¼•ç”¨è®¡æ•°
  
- **äº‹ä»¶å¯¹è±¡æ± **
  - äº‹ä»¶å¯¹è±¡å¤ç”¨
  - å‡å°‘äº‹ä»¶ç³»ç»Ÿå†…å­˜åˆ†é…
  - é«˜æ€§èƒ½æ¶ˆæ¯ä¼ é€’
  
- **ç¼“å­˜æ± **
  - é€šç”¨æ•°æ®ç»“æ„ç¼“å­˜
  - è‡ªåŠ¨è¿‡æœŸæ¸…ç†
  - å†…å­˜ä½¿ç”¨ä¼˜åŒ–

### ğŸ’ª é«˜çº§åŠŸèƒ½

- **æ™ºèƒ½é¢„çƒ­ç³»ç»Ÿ**
  - åŸºäºä½¿ç”¨æƒ…å†µçš„è‡ªåŠ¨é¢„çƒ­
  - å¯é…ç½®çš„é¢„çƒ­ç­–ç•¥
  - åœºæ™¯åŠ è½½ä¼˜åŒ–

- **åŠ¨æ€å®¹é‡ç®¡ç†**
  - è‡ªé€‚åº”æ± å¤§å°è°ƒæ•´
  - åŸºäºä½¿ç”¨ç‡çš„å®¹é‡ä¼˜åŒ–
  - å†…å­˜å ç”¨æ§åˆ¶

- **å…¨é¢çš„å¯¹è±¡éªŒè¯**
  - å®Œæ•´æ€§æ£€æŸ¥
  - çŠ¶æ€éªŒè¯
  - å¼‚å¸¸æ£€æµ‹å’ŒæŠ¥å‘Š

- **å®æ—¶æ€§èƒ½ç›‘æ§**
  - è¯¦ç»†çš„æ€§èƒ½æŒ‡æ ‡ç»Ÿè®¡
  - å†…å­˜ä½¿ç”¨åˆ†æ
  - æ€§èƒ½ç“¶é¢ˆæ£€æµ‹

- **è¯Šæ–­ç³»ç»Ÿ**
  - é”™è¯¯è¿½è¸ªå’Œæ—¥å¿—
  - æ€§èƒ½é—®é¢˜è¯Šæ–­
  - è¿è¡Œæ—¶åˆ†æå·¥å…·

### ğŸ”Œ æ‰©å±•åŠŸèƒ½

- **Addressables é›†æˆ**
  - å¼‚æ­¥èµ„æºåŠ è½½æ”¯æŒ
  - æ™ºèƒ½èµ„æºé‡Šæ”¾
  - å†…å­˜ç®¡ç†ä¼˜åŒ–

- **UniTask æ”¯æŒ**
  - å¼‚æ­¥æ“ä½œä¼˜åŒ–
  - éé˜»å¡å¼èµ„æºåŠ è½½
  - æ€§èƒ½ä¼˜åŒ–

- **è‡ªå®šä¹‰æ‰©å±•**
  - çµæ´»çš„æ‰©å±•æ¥å£
  - è‡ªå®šä¹‰æ± ç±»å‹æ”¯æŒ
  - æ’ä»¶åŒ–æ¶æ„

## ç³»ç»Ÿè¦æ±‚

- Unity 2019.4 æˆ–æ›´é«˜ç‰ˆæœ¬
- .NET Standard 2.0+

## å®‰è£…æŒ‡å—

### æ–¹æ³• 1ï¼šé€šè¿‡ Unity Package Manager

1. æ‰“å¼€ Package Manager (Window > Package Manager)
2. ç‚¹å‡» "+" > "Add package from git URL"
3. è¾“å…¥: `https://github.com/Tianyuyuyuyuyuyu/TByd.git#master`

### æ–¹æ³• 2ï¼šæ‰‹åŠ¨å®‰è£…

1. ä¸‹è½½æœ€æ–°ç‰ˆæœ¬
2. è§£å‹åˆ°é¡¹ç›®çš„ Assets ç›®å½•

### å¯é€‰ä¾èµ–

- Addressables Package (å¯ç”¨ `TBYD_ADDRESSABLES_SUPPORT`)
- UniTask Package (å¯ç”¨ `TBYD_UNITASK_SUPPORT`)

## å¿«é€Ÿå…¥é—¨

### åŸºç¡€å¯¹è±¡æ± 

```csharp
// åˆ›å»ºå¯¹è±¡æ± 
var pool = new ObjectPool<MyClass>(() => new MyClass());
// è·å–å¯¹è±¡
var obj = pool.Get();
// è¿”å›å¯¹è±¡
pool.Return(obj);
```

### GameObject å¯¹è±¡æ± ä½¿ç”¨

```csharp
// åˆ›å»º GameObject æ± 
var pool = new GameObjectPool(prefab);
// é¢„çƒ­æ± 
pool.Prewarm(5);
// è·å–å®ä¾‹
var instance = pool.Get();
// è¿”å›å®ä¾‹
pool.Return(instance);
```

### ä½¿ç”¨ PoolManager

```csharp
// æ³¨å†Œé¢„åˆ¶ä½“
PoolManager.Instance.RegisterPrefab<MyComponent>(prefab);
// è·å–å¯¹è±¡æ± 
var pool = PoolFactory.CreatePool<MyComponent>();
// è·å–å®ä¾‹
var component = pool.Get();
```

## é«˜çº§åŠŸèƒ½

### å¯¹è±¡æ± é…ç½®

```csharp
var settings = ScriptableObject.CreateInstance<PoolSettings>();
settings.DefaultPoolSize = 32;
settings.EnableAutoPrewarm = true;
var pool = new GameObjectPool(prefab, settings);
```

### å¯¹è±¡å›è°ƒ

```csharp
public class MyPooledObject : PoolCallbacksBehaviour
{
    public override void OnGet()
    {
        // å¯¹è±¡è¢«è·å–æ—¶è°ƒç”¨
    }
    
    public override void OnReturn()
    {
        // å¯¹è±¡è¢«è¿”å›æ—¶è°ƒç”¨
    }
}
```

### æ€§èƒ½ç›‘æ§

```csharp
var report = PoolPerformanceMonitor.Instance.GenerateReport("MyPool");
Debug.Log(report.ToString());
```

## æœ€ä½³å®è·µ

### 1. é¢„çƒ­æ± 

- åœ¨åœºæ™¯åŠ è½½æ—¶é¢„çƒ­å¸¸ç”¨å¯¹è±¡æ± 
- æ ¹æ®å®é™…éœ€æ±‚è®¾ç½®åˆé€‚çš„é¢„çƒ­æ•°é‡

### 2. é…ç½®ä¼˜åŒ–

- ä½¿ç”¨ PoolSettings é…ç½®æ± å‚æ•°
- å¯ç”¨è‡ªåŠ¨æ¸…ç†ä»¥é˜²æ­¢å†…å­˜æ³„æ¼
- åˆç†è®¾ç½®æ± å®¹é‡

### 3. æ€§èƒ½è€ƒè™‘

- ä½¿ç”¨å…±äº«æ± å¤„ç†ç›¸åŒé¢„åˆ¶ä½“
- å¯ç”¨å¯¹è±¡éªŒè¯ä»¥æå‰å‘ç°é—®é¢˜
- ç›‘æ§æ± æ€§èƒ½ä»¥ä¾¿åŠæ—¶ä¼˜åŒ–

## æ³¨æ„äº‹é¡¹

### 1. å¯¹è±¡å›æ”¶

- ç¡®ä¿è¿”å›å¯¹è±¡åˆ°æ­£ç¡®çš„æ± 
- ä¸è¦é‡å¤è¿”å›åŒä¸€å¯¹è±¡
- è¿”å›å‰é‡ç½®å¯¹è±¡çŠ¶æ€

### 2. çº¿ç¨‹å®‰å…¨

- ä¸»çº¿ç¨‹æ“ä½œ GameObject
- ä½¿ç”¨ AsyncPool å¤„ç†å¼‚æ­¥æ“ä½œ
- æ³¨æ„å¹¶å‘è®¿é—®çš„åŒæ­¥é—®é¢˜

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. å¯¹è±¡æœªæ­£ç¡®å›æ”¶

- æ£€æŸ¥æ˜¯å¦æ­£ç¡®è°ƒç”¨ Return æ–¹æ³•
- ç¡®è®¤å¯¹è±¡æœªè¢«é”€æ¯

#### 2. å†…å­˜æ³„æ¼

- æ£€æŸ¥æ˜¯å¦åŠæ—¶æ¸…ç†ä¸ç”¨çš„æ± 
- ç¡®ä¿æ­£ç¡®å¤„ç†æ± çš„ç”Ÿå‘½å‘¨æœŸ

#### 3. æ€§èƒ½é—®é¢˜

- æŸ¥çœ‹æ€§èƒ½ç›‘æ§æŠ¥å‘Š
- ä¼˜åŒ–æ± é…ç½®å‚æ•°
- è€ƒè™‘ä½¿ç”¨å…±äº«æ± 

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›æœ¬é¡¹ç›®ã€‚è¯·ç¡®ä¿ï¼š

1. éµå¾ªç°æœ‰ä»£ç é£æ ¼
2. æ·»åŠ é€‚å½“çš„å•å…ƒæµ‹è¯•
3. æ›´æ–°ç›¸å…³æ–‡æ¡£

## è®¸å¯è¯

[MIT License](https://opensource.org/licenses/MIT)

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- GitHub Issues: [[Issues](https://github.com/Tianyuyuyuyuyuyu/TByd/issues)]
- é‚®ä»¶æ”¯æŒ: [[Google Mail](tianyulovecars@gmail.com)]
- Discord: [[Discord](https://discord.gg/dq3QGsF7)]

---
Â© 2024 TBydFramework. All rights reserved.