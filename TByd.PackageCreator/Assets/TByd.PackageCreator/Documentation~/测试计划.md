# TByd.PackageCreator 包创建测试计划

## 测试目标

验证从模拟包创建逻辑切换到实际包创建逻辑后，整个系统的正常工作情况，包括：

1. 验证完整的包创建流程
2. 测试错误处理和边界情况
3. 确认用户界面响应和状态更新
4. 验证生成的包结构和内容

## 测试环境

-   Unity 版本：2021.3.8f1 LTS
-   操作系统：Windows、macOS
-   测试项目：新建空项目和现有项目

## 准备工作

1. 创建测试分支，确保可以随时回退修改
2. 准备几个测试目录用于创建包（如：`H:/PackageTest`）
3. 准备测试用的包配置信息（不同名称、版本、依赖等）

## 测试用例

### 1. 基础流程测试

| 测试 ID | 测试内容                           | 预期结果                                  |
| ------- | ---------------------------------- | ----------------------------------------- |
| BF-01   | 使用基础包模板创建最简包           | 成功创建包，包含基本结构                  |
| BF-02   | 使用编辑器工具模板创建编辑器扩展包 | 成功创建包，包含 Editor 文件夹和菜单项    |
| BF-03   | 使用运行时库模板创建运行时库包     | 成功创建包，包含 Runtime 文件夹和示例代码 |
| BF-04   | 创建包含测试的包                   | 成功创建包，包含 Tests 文件夹和基本测试   |
| BF-05   | 创建包含样例的包                   | 成功创建包，包含 Samples~文件夹和示例场景 |

### 2. 错误处理测试

| 测试 ID | 测试内容                     | 预期结果                         |
| ------- | ---------------------------- | -------------------------------- |
| ER-01   | 创建名称无效的包（空名称）   | 显示错误信息，不进行创建         |
| ER-02   | 创建名称无效的包（格式错误） | 显示格式错误，不进行创建         |
| ER-03   | 创建到已存在的目录           | 显示目录已存在警告，提供覆盖选项 |
| ER-04   | 创建到无权限的目录           | 显示权限错误，不进行创建         |
| ER-05   | 中途取消创建过程             | 正确取消，不留下部分创建文件     |

### 3. 界面响应测试

| 测试 ID | 测试内容             | 预期结果                         |
| ------- | -------------------- | -------------------------------- |
| UI-01   | 创建过程中的进度显示 | 进度条正确反映各阶段进度         |
| UI-02   | 创建完成后的结果显示 | 结果页面显示所有创建的文件和目录 |
| UI-03   | 错误时的界面响应     | 错误信息清晰显示，提供重试选项   |
| UI-04   | 按钮状态变化         | 操作不可用时按钮正确禁用         |
| UI-05   | 重新开始功能         | 可以正确重置状态并重新开始       |

### 4. 包结构验证

| 测试 ID | 测试内容              | 预期结果                   |
| ------- | --------------------- | -------------------------- |
| PS-01   | 包目录结构验证        | 目录结构符合模板定义       |
| PS-02   | package.json 内容验证 | 配置信息正确写入           |
| PS-03   | Assembly 定义文件验证 | 包含正确的命名空间和引用   |
| PS-04   | 变量替换验证          | 所有模板变量正确替换       |
| PS-05   | 特殊字符处理          | 包含特殊字符的配置正确处理 |

## 测试步骤

### 基础流程测试步骤（BF-01）

1. 打开 Unity 编辑器
2. 通过菜单打开包创建器窗口：`Tools > TByd > UPM Package Creator`
3. 选择"基础包模板"
4. 在配置页面输入：
    - 包名称：`com.example.test`
    - 显示名称：`Test Package`
    - 版本：`1.0.0`
    - 描述：`A test package`
    - 作者：`Test Author`
5. 配置依赖页面保持默认
6. 高级选项页面保持默认
7. 查看摘要页面确认信息
8. 点击"创建包"按钮
9. 等待创建完成
10. 验证结果页面信息
11. 检查生成的包文件和结构

### 错误处理测试步骤（ER-01）

1. 打开 Unity 编辑器
2. 通过菜单打开包创建器窗口
3. 选择任意模板
4. 在配置页面将包名称设为空
5. 尝试进入下一步
6. 验证是否显示错误信息且不允许进入下一步

### 界面响应测试步骤（UI-01）

1. 打开 Unity 编辑器
2. 通过菜单打开包创建器窗口
3. 完成包配置
4. 点击"创建包"
5. 观察进度条是否正确更新
6. 记录每个阶段进度条的变化情况

### 包结构验证步骤（PS-01）

1. 成功创建一个包
2. 打开包所在文件夹
3. 验证目录结构是否符合模板定义
4. 检查关键文件是否存在：
    - package.json
    - README.md
    - CHANGELOG.md
    - LICENSE.md
    - Assembly 定义文件
5. 验证目录是否正确：
    - Runtime（如适用）
    - Editor（如适用）
    - Tests（如已选择）
    - Samples~（如已选择）
    - Documentation~

## 测试记录方法

使用验证记录文档记录每个测试用例的执行结果，包括：

1. 测试 ID 和名称
2. 实际结果
3. 是否通过
4. 如失败，记录详细的错误信息
5. 截图或录屏记录（如适用）

## 回归测试

修复任何发现的问题后，需要重新执行以下测试：

1. 所有失败的测试用例
2. 与修改相关的其他测试用例
3. 基础流程测试（确保核心功能未受影响）

## 测试结果评估

根据测试结果，将给出以下评估：

1. 是否可以发布到生产环境
2. 已知问题列表和严重程度
3. 建议的优化和改进事项
4. 未来版本需要增加的测试覆盖范围
